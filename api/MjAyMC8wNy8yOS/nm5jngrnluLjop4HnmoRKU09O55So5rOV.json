{"title":"ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•","date":"2020-07-29T12:59:25.000Z","date_formatted":{"ll":"Jul 29, 2020","L":"07/29/2020","MM-DD":"07-29"},"thumbnail":"/images/thumbnail/4.jpg","link":"2020/07/29/ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•","comments":true,"tags":["JSON","JavaScript","å‰ç«¯"],"updated":"2020-08-10T15:19:07.785Z","content":"<h2 id=\"json-æ˜¯ä»€ä¹ˆï¼Ÿ\">JSON æ˜¯ä»€ä¹ˆï¼Ÿ<a title=\"#json-æ˜¯ä»€ä¹ˆï¼Ÿ\" href=\"#json-æ˜¯ä»€ä¹ˆï¼Ÿ\"></a></h2>\n<p>JSON æ˜¯ä¸€ç§è¯­æ³•ï¼Œå¯ä»¥ç”¨æ¥åºåˆ—åŒ–å¯¹è±¡ã€æ•°ç»„æˆ–è€…æ•°å­—ç­‰æ•°æ®ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ JSON æ¥å°†æ•°æ®è½¬æˆå­—ç¬¦ä¸²çš„å½¢å¼ã€‚</p>\n<h2 id=\"å¸¸è§çš„-api\">å¸¸è§çš„ API<a title=\"#å¸¸è§çš„-api\" href=\"#å¸¸è§çš„-api\"></a></h2>\n<h3 id=\"json.parse\">JSON.parse<a title=\"#json.parse\" href=\"#json.parse\"></a></h3>\n<ul>\n<li>\n<p>åŠŸèƒ½</p>\n<p>è¿˜åŸè¢«åºåˆ—åŒ–çš„æ•°æ®ï¼ˆååºåˆ—åŒ–ï¼‰ï¼Œå³å°†å­—ç¬¦ä¸²è¿˜åŸä¸ºå®ƒæœ¬æ¥çš„æ•°æ®ç»“æ„ã€‚</p>\n</li>\n<li>\n<p>å‚æ•°</p>\n<ul>\n<li><code>text</code>ï¼Œå³å°†è¦è¢«ã€Œååºåˆ—åŒ–ã€çš„å­—ç¬¦ä¸²</li>\n<li><code>reviver</code>ï¼Œå¤„ç†å­—ç¬¦ä¸²çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥å‚ä¸åˆ°ã€Œååºåˆ—åŒ–ã€çš„è¿‡ç¨‹ï¼Œéå†é¡ºåºæ˜¯ç”±å†…åˆ°å¤–</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"json.stringify\">JSON.stringify<a title=\"#json.stringify\" href=\"#json.stringify\"></a></h3>\n<ul>\n<li>\n<p>åŠŸèƒ½</p>\n<p>åºåˆ—åŒ–ä¸€ä¸ªå€¼ï¼Œå³å°†ä¸€ä¸ªå€¼è½¬ä¸ºå­—ç¬¦ä¸²çš„å½¢å¼ã€‚</p>\n</li>\n<li>\n<p>å‚æ•°</p>\n<ul>\n<li><code>value</code>ï¼Œå°†è¦è¢«åºåˆ—åŒ–çš„å€¼</li>\n<li><code>replacer</code>\n<ol>\n<li>å¦‚æœè¯¥å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä¼šå‚ä¸åˆ°åºåˆ—åŒ–çš„è¿‡ç¨‹å½“ä¸­</li>\n<li>å¦‚æœè¯¥å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆåªæœ‰åŒ…å«åœ¨æ•°ç»„é‡Œçš„å±æ€§æ‰ä¼šè¢«åºåˆ—åŒ–</li>\n<li>å¦‚æœè¯¥å€¼æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆæ‰€æœ‰å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä½¿ç”¨åœºæ™¯\">ä½¿ç”¨åœºæ™¯<a title=\"#ä½¿ç”¨åœºæ™¯\" href=\"#ä½¿ç”¨åœºæ™¯\"></a></h2>\n<h3 id=\"æœ¬åœ°ç¼“å­˜\">æœ¬åœ°ç¼“å­˜<a title=\"#æœ¬åœ°ç¼“å­˜\" href=\"#æœ¬åœ°ç¼“å­˜\"></a></h3>\n<p>ç»å¸¸ä½¿ç”¨çš„æœ¬åœ°ç¼“å­˜å¦‚ <code>localStorage</code>ï¼Œå¯¹äºå­˜å…¥çš„æ•°æ®æ˜¯æœ‰è¦æ±‚çš„ï¼šé”®åå’Œå€¼éƒ½åªèƒ½æ˜¯ <code>string</code> ç±»å‹ã€‚<br>\nè€Œè¿™æ—¶ <code>JSON</code> å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ğŸ‘‡</p>\n<ul>\n<li>å­˜å‚¨</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">localStorage.set(key, <span class=\"built_in\">JSON</span>.stringify(data))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æå–</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">localStorage.getItem(key, <span class=\"built_in\">JSON</span>.parse(str))</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¤„ç†-date-å¯¹è±¡\">å¤„ç† Date å¯¹è±¡<a title=\"#å¤„ç†-date-å¯¹è±¡\" href=\"#å¤„ç†-date-å¯¹è±¡\"></a></h4>\n<p>å¦‚æœå¯¹è±¡é‡Œæœ‰ <code>Date</code> å¯¹è±¡ï¼Œé‚£ä¹ˆåºåˆ—åŒ–ä¹‹åç»“æœæ˜¯è¿™æ ·çš„ğŸ‘‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"2020-07-29T14:47:09.608Z\"</span></span><br></pre></td></tr></table></figure>\n<p>è¿™æ—¶å€™å°±å¤´ç–¼äº†ï¼Œæˆ‘ä»¬éœ€è¦å†å†™ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†ååºåˆ—åŒ–ä¹‹åçš„ç»“æœå—ï¼Ÿ<br>\n<img src=\"/images/JSON/1.jpeg\" alt=\"\"></p>\n<p>åˆ«å¿˜äº†ä¸Šé¢æåˆ°çš„å‚æ•°ï¼Œæ— è®ºæ˜¯ <code>parse</code> è¿˜æ˜¯ <code>stringify</code> éƒ½å…è®¸ä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥æ§åˆ¶åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å¤„ç† <code>Date</code> çš„å¯¹è±¡ğŸ‘‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    text: <span class=\"string\">'just do it'</span>,</span><br><span class=\"line\">    date: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"built_in\">JSON</span>.stringify(obj)</span><br><span class=\"line\"><span class=\"keyword\">let</span> org = <span class=\"built_in\">JSON</span>.parse(str, (key, val) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ˜¯ date å°±è½¬æˆ Date</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key === <span class=\"string\">'date'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(val)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> val</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¤„ç†-regexp-å¯¹è±¡\">å¤„ç† RegExp å¯¹è±¡<a title=\"#å¤„ç†-regexp-å¯¹è±¡\" href=\"#å¤„ç†-regexp-å¯¹è±¡\"></a></h4>\n<p>ç°åœ¨åœºæ™¯æ›´åŠ å¤æ‚äº†ï¼Œä½ éœ€è¦å¤„ç† <code>RegExp</code> å¯¹è±¡äº†ï¼Œè¿™æ—¶å€™è¦æ€ä¹ˆåšå‘¢ï¼Ÿæ‰‹å¿«çš„åŒå­¦å¯èƒ½å°±ç›´æ¥å¼€åŠ¨äº†ğŸ‘‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    reg: <span class=\"regexp\">/\\d+/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"built_in\">JSON</span>.stringify(obj)</span><br><span class=\"line\"><span class=\"keyword\">let</span> org = <span class=\"built_in\">JSON</span>.parse(str)</span><br></pre></td></tr></table></figure>\n<p>å®é™…ä¸Šï¼Œç›´æ¥åºåˆ—åŒ–ä¸€ä¸ª <code>RegExp</code> å¯¹è±¡åªä¼šè¿”å›ä¸€ä¸ª <code>&quot;{}&quot;</code>ï¼ˆä¸ä¿¡ä½ è¯•è¯•ï¼‰<br>\n<img src=\"/images/JSON/2.jpg\" alt=\"\"></p>\n<p>åˆ«å¿˜äº†ï¼Œ<code>RegExp</code>  æ„é€ å‡½æ•°å¯ä»¥ä¼ å…¥è¿™ä¸¤ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li><code>source</code></li>\n<li><code>flags</code></li>\n</ul>\n<p>å› æ­¤æˆ‘ä»¬åªè¦å¯¹åŒ…å« <code>RegExp</code> å¯¹è±¡çš„å±æ€§åœ¨åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ—¶åšç‰¹åˆ«å¤„ç†å³å¯ğŸ‘‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åºåˆ—åŒ– RegExp å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">reg</span>: <span class=\"regexp\">/\\d+/</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"built_in\">JSON</span>.stringify(obj, (key, val) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key === <span class=\"string\">'reg'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            source: val.source,</span><br><span class=\"line\">            flags: val.flags</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> val</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// ååºåˆ—åŒ–</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> org = <span class=\"built_in\">JSON</span>.stringify(str, (key, val) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key === <span class=\"string\">'reg'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(val.source, val.flags)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> val</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º\">åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º<a title=\"#åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º\" href=\"#åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º\"></a></h3>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ <code>JSON.stringify</code> æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼ˆæ²¡æœ‰ä»»ä½•å±æ€§ï¼‰ğŸ‘‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isObjectEmpty = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.stringify(obj) === <span class=\"string\">'&#123;&#125;'</span> &amp;&amp; !obj.__proto__</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"æ€»ç»“\">æ€»ç»“<a title=\"#æ€»ç»“\" href=\"#æ€»ç»“\"></a></h2>\n<p><img src=\"/images/JSON/3.svg\" alt=\"\" class=\"Ï†cx\"></p>\n","prev":{"title":"1502.åˆ¤æ–­èƒ½å¦å½¢æˆç­‰å·®æ•°åˆ—","link":"2020/07/30/1502-åˆ¤æ–­èƒ½å¦å½¢æˆç­‰å·®æ•°åˆ—"},"next":{"title":"49.å­—æ¯å¼‚ä½è¯åˆ†ç»„","link":"2020/07/29/49-å­—æ¯å¼‚ä½è¯åˆ†ç»„"},"plink":"https://pigpigever.github.io/2020/07/29/ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•/","toc":[{"id":"json-æ˜¯ä»€ä¹ˆï¼Ÿ","title":"JSON æ˜¯ä»€ä¹ˆï¼Ÿ","index":"1"},{"id":"å¸¸è§çš„-api","title":"å¸¸è§çš„ API","index":"2","children":[{"id":"json.parse","title":"JSON.parse","index":"2.1"},{"id":"json.stringify","title":"JSON.stringify","index":"2.2"}]},{"id":"ä½¿ç”¨åœºæ™¯","title":"ä½¿ç”¨åœºæ™¯","index":"3","children":[{"id":"æœ¬åœ°ç¼“å­˜","title":"æœ¬åœ°ç¼“å­˜","index":"3.1"},{"id":"åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º","title":"åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º","index":"3.2"}]},{"id":"æ€»ç»“","title":"æ€»ç»“","index":"4"}],"copyright":{"author":"Tonychen","link":"<a href=\"https://pigpigever.github.io/2020/07/29/ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•/\" title=\"ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•\">https://pigpigever.github.io/2020/07/29/ç›˜ç‚¹å¸¸è§çš„JSONç”¨æ³•/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}